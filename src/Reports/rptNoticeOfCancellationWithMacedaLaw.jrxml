<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptNoticeOfCancellationWithMacedaLaw" pageWidth="612" pageHeight="792" columnWidth="491" leftMargin="64" rightMargin="57" topMargin="12" bottomMargin="12">
	<property name="ireport.zoom" value="1.210000000000001"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="327"/>
	<parameter name="notice_type_id" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["04"]]></defaultValueExpression>
	</parameter>
	<parameter name="batch_no" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["0000000016"]]></defaultValueExpression>
	</parameter>
	<parameter name="company" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["CENQHOMES DEVELOPMENT CORPORATION"]]></defaultValueExpression>
	</parameter>
	<parameter name="prepared_by" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["ccpaquibot"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
  --get_client_name(a.entity_id) as client_name,
  client_name as client_name,
  (CASE WHEN get_clients_has_moved_in(a.entity_id,a.projcode,a.pbl_id,a.seq_no,current_date ) THEN 'NOTICE OF CANCELLATION AND TO VACATE' ELSE 'NOTICE OF CANCELLATION' END) AS notice_title,
  TRIM(c.proj_name) as project_name,
  TRIM(d.description) as unit,
  TRIM(a.entity_id) as client_id,
  TRIM(d.unit_id) as unit_id,
  UPPER(TRIM(g.addr_no)) as addr_no,
  UPPER(TRIM(g.street)) as street,
  UPPER(TRIM(g.barangay)) as barangay,
  UPPER(TRIM(h.city_name)) as city_name,
  UPPER(TRIM(i.municipality_name)) as municipality_name,
  UPPER(TRIM(j.province_name)) as province_name,
    sp_center_format(0, to_char(a.dateprep, 'FMMonth dd, yyyy'))  AS date_prepared,
  sp_center_format(0, TRIM(e.part_desc)) as particular, --50
  sp_center_format(0, TRIM(f.model_desc)) as model, --50
  sp_center_format(0, to_char(a.billingduedate, 'FMMONTH')) as month_due, --30
  sp_center_format(0, to_char(a.billingduedate, 'FMMonth dd, yyyy')) as due_date, --50
  duedate AS due_date_fromto,
  sp_center_format(00, amtdue)::numeric as amount_due2, --50
  sp_center_format(0, '533-8459 or 534-2237 local 75') as contact_no, --50
  sp_center_format(0, 'collection@acerhomes.com') as email,
  k.company_alias, --60
  company_address,
  g.zip_code



FROM rf_client_notices a
LEFT JOIN rf_entity b ON b.entity_id = a.entity_id
LEFT JOIN mf_project c ON c.proj_id = a.projcode
LEFT JOIN mf_unit_info d ON d.proj_id = a.projcode AND d.pbl_id = a.pbl_id
LEFT JOIN mf_client_ledger_part e ON e.part_id = a.part_id
LEFT JOIN mf_product_model f ON f.model_id = d.model_id
LEFT JOIN rf_entity_address g ON g.entity_id = a.entity_id AND g.pref_billing
LEFT JOIN mf_city h ON h.city_id = g.city_id
LEFT JOIN mf_municipality i ON i.municipality_id = g.municipality_id
LEFT JOIN mf_province j ON j.province_id = g.province_id
LEFT JOIN mf_company k ON k.co_id = c.co_id
LEFT JOIN view_client_co_applicant_name l ON  l.entity_id = a.entity_id

WHERE a.batch_no = $P{batch_no}
and notice_id = '117'
and a.status_id = 'A'
ORDER BY get_client_name(a.entity_id);]]>
	</queryString>
	<field name="client_name" class="java.lang.String"/>
	<field name="notice_title" class="java.lang.String"/>
	<field name="project_name" class="java.lang.String"/>
	<field name="unit" class="java.lang.String"/>
	<field name="client_id" class="java.lang.String"/>
	<field name="unit_id" class="java.lang.String"/>
	<field name="addr_no" class="java.lang.String"/>
	<field name="street" class="java.lang.String"/>
	<field name="barangay" class="java.lang.String"/>
	<field name="city_name" class="java.lang.String"/>
	<field name="municipality_name" class="java.lang.String"/>
	<field name="province_name" class="java.lang.String"/>
	<field name="date_prepared" class="java.lang.String"/>
	<field name="particular" class="java.lang.String"/>
	<field name="model" class="java.lang.String"/>
	<field name="month_due" class="java.lang.String"/>
	<field name="due_date" class="java.lang.String"/>
	<field name="due_date_fromto" class="java.lang.String"/>
	<field name="amount_due2" class="java.math.BigDecimal"/>
	<field name="contact_no" class="java.lang.String"/>
	<field name="email" class="java.lang.String"/>
	<field name="company_alias" class="java.lang.String"/>
	<field name="company_address" class="java.lang.String"/>
	<field name="zip_code" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="100">
			<textField>
				<reportElement x="0" y="0" width="491" height="25"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="18" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{company}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="25" width="490" height="15"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{company_address}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="55" width="490" height="35"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Bernard MT Condensed" size="22" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{notice_title}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="160" splitType="Prevent">
			<textField>
				<reportElement x="357" y="10" width="133" height="15"/>
				<box rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{project_name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="357" y="26" width="133" height="15"/>
				<box rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{unit_id}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="357" y="42" width="133" height="15"/>
				<box rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{client_id}]]></textFieldExpression>
			</textField>
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="1" y="10" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="54" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{client_name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="2" y="141" width="330" height="15"/>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Dear " + $F{client_name} + ":"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="289" y="10" width="62" height="15"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isItalic="true"/>
				</textElement>
				<text><![CDATA[Project]]></text>
			</staticText>
			<staticText>
				<reportElement x="289" y="26" width="62" height="15"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isItalic="true"/>
				</textElement>
				<text><![CDATA[Unit]]></text>
			</staticText>
			<staticText>
				<reportElement x="289" y="42" width="62" height="15"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isItalic="true"/>
				</textElement>
				<text><![CDATA[Client ID]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="1" y="85" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{barangay}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="100" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{city_name} == null ? msg("{0}, {1}", $F{municipality_name} == null ? "" : $F{municipality_name}, $F{province_name} == null ? "" : $F{province_name}):$F{city_name}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="69" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg("{0} {1}", $F{addr_no} == null ? "" : $F{addr_no} , $F{street} == null ? "" : $F{street}  )]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="115" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{zip_code}]]></textFieldExpression>
			</textField>
		</band>
		<band height="237">
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="0" y="17" width="491" height="21"/>
				<textElement textAlignment="Justified" markup="styled">
					<font fontName="Tahoma" size="11"/>
					<paragraph lineSpacing="AtLeast" tabStopWidth="40"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Per R.A. <u><b>   6552   </b></u>, please be informed that we have cancelled  your account on <u><b>    "+$F{date_prepared}+"    </b></u>"+
" due to your failure to pay deliquent payments for the period <u><b>    "+$F{due_date_fromto}+"    </b></u>"+
" amounting to <u><b>   "+ new DecimalFormat("#,##0.00").format($F{amount_due2})+"   </b></u> exclusive of penalties.\n\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="0" y="38" width="491" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Top" rotation="None" markup="styled">
					<font fontName="Tahoma" size="11"/>
					<paragraph lineSpacing="AtLeast"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["If you have already move-in, this should also serve as a notice for you to vacate the property within thirty (30) days from your cancellation date.\n\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="0" y="119" width="491" height="20"/>
				<textElement markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["SUBCRIBED AND SWORN TO before me this _____________________________, in the City of _________________________________, affiant exhibited to me his/her <u>   PRC No. 0004096    </u>.\n\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="0" y="78" width="490" height="20"/>
				<textElement markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Very truly yours,\n\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="-1" y="98" width="491" height="20"/>
				<textElement markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Johnny L. Corpuz \nVice President\n\n\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="3" y="139" width="47" height="15"/>
				<textElement verticalAlignment="Bottom" markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Doc No."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="3" y="154" width="47" height="15"/>
				<textElement verticalAlignment="Bottom" markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page No."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="3" y="169" width="47" height="15"/>
				<textElement verticalAlignment="Bottom" markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Book No."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="3" y="184" width="47" height="15"/>
				<textElement verticalAlignment="Bottom" markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Series of "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="337" y="139" width="154" height="15"/>
				<textElement markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["NOTARY PUBLIC"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" x="50" y="139" width="106" height="15"/>
				<box>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" x="50" y="154" width="106" height="15"/>
				<box>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" x="50" y="169" width="106" height="15"/>
				<box>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" x="50" y="184" width="106" height="15"/>
				<box>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement markup="styled">
					<font fontName="Tahoma" size="11"/>
				</textElement>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="0" y="58" width="491" height="20"/>
				<textElement textAlignment="Justified" markup="styled">
					<font fontName="Tahoma" size="11"/>
					<paragraph lineSpacing="AtLeast"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Moreover, we have prepared a check in your favor representing the payment of Cash Surrender Value  amounting to <u>                                                                                                             </u>\n<u>                                           </u>With Check No.<u>                                                                </u> under China Bank.\n\n\n"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="12">
			<textField>
				<reportElement x="0" y="0" width="256" height="12"/>
				<textElement markup="styled">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg("<font face=\"Dot Font\">{0}</font>/{1}", $F{company_alias}, $P{prepared_by}.toUpperCase())]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="263" y="0" width="228" height="12"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Batch No. " + $P{batch_no}]]></textFieldExpression>
			</textField>
		</band>
	</columnFooter>
</jasperReport>
