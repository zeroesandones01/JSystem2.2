<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rpt_hdmf_rem_td_extension_undertaking2" pageWidth="612" pageHeight="936" columnWidth="576" leftMargin="18" rightMargin="18" topMargin="36" bottomMargin="36">
	<property name="ireport.zoom" value="1.241842646118315"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="48"/>
	<property name="net.sf.jasperreports.export.xls.detect.cell.type" value="true"/>
	<property name="net.sf.jasperreports.export.xls.exclude.origin.keep.first.band.1" value="columnHeader"/>
	<property name="net.sf.jasperreports.export.xls.exclude.origin.keep.first.band.2" value="pageHeader"/>
	<property name="net.sf.jasperreports.export.xls.exclude.origin.band.(uniqueValue)" value="columnFooter"/>
	<property name="net.sf.jasperreports.export.xls.remove.empty.space.between.rows" value="true"/>
	<property name="net.sf.jasperreports.export.xls.collapse.row.span" value="true"/>
	<property name="net.sf.jasperreports.export.xls.wrap.text" value="false"/>
	<property name="net.sf.jasperreports.export.xls.white.page.background" value="false"/>
	<property name="net.sf.jasperreports.export.xls.ignore.graphics" value="true"/>
	<property name="net.sf.jasperreports.export.xls.auto.fit.column" value="true"/>
	<property name="net.sf.jasperreports.print.keep.full.text" value="true"/>
	<property name="net.sf.jasperreports.export.xls.auto.fit.row" value="true"/>
	<parameter name="co_name" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="dateParam" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="user_name" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="project" class="java.lang.String"/>
	<parameter name="batch_no" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="count" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="tag" class="java.lang.Boolean">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="co_id" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="proj_id" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="phase" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="company_address" class="java.lang.String"/>
	<queryString>
		<![CDATA[select trim(replace(to_words($P{count}), 'DOLLAR ZERO CENTS', '')) as count_words,
split_part(c_unit, ' ', 2) as phase,
split_part(c_unit, ' ', 4) as block,
split_part(c_unit, ' ', 6) as lot,
row_number() over(order by a.c_name) as "row",
(select x.proj_alias from mf_project x where x.proj_id = a.c_proj_id and coalesce(b.server_id,'')=coalesce(x.server_id,'')) as project_alias, a.c_name,
(select x.actual_date::date from rf_buyer_status x where x.entity_id = c_entity_id and x.proj_id = c_proj_id and x.pbl_id = c_pbl_id and x.seq_no::int = c_seq_no::int and x.status_id = 'A' and x.byrstatus_id = '95') as endorsement_date,
(case when $P{batch_no} = '' then $P{user_name} else (select z.entity_name from rf_buyer_status x inner join em_employee y on x.created_by = y.emp_code inner join rf_entity z on y.entity_id = z.entity_id and coalesce(x.server_id,'')=coalesce(z.server_id,'') and coalesce(x.proj_server,'')= coalesce(z.proj_server,'')  where x.entity_id = c_entity_id and x.proj_id = c_proj_id and x.pbl_id = c_pbl_id and x.seq_no::int = c_seq_no::int and x.status_id = 'A' and x.byrstatus_id = '95') end) as created_by,
(select x.doc_no from rf_tct_taxdec_monitoring_hd x where x.pbl_id = b.pbl_id and x.proj_id = b.proj_id and x.doc_type = '65' and x.status_id = 'A' and coalesce(x.server_id,'')=coalesce(b.server_id,'') and coalesce(x.proj_server,'')= coalesce(b.proj_server,'')ORDER BY x.date_created desc limit 1) as original_tct,
/*(select x.doc_no from rf_tct_taxdec_monitoring_hd x where x.pbl_id = b.pbl_id and x.doc_type = '67' and x.status_id = 'A') as td_lot_no,
(select x.doc_no from rf_tct_taxdec_monitoring_hd x where x.pbl_id = b.pbl_id and x.doc_type = '98' and x.status_id = 'A') as td_house_no,*/
(select x.proj_name from mf_project x where x.proj_id = a.c_proj_id) as project,
now()::date as date, a.c_tct_pages, date_part('year', now())::varchar as year, a.c_company_name, a.c_company_address
from view_hdmf_rem_fourteenth_td_extension_v2($P{batch_no},$P{co_id},$P{proj_id},$P{phase}, $P{tag}) a
inner join mf_unit_info b on a.c_pbl_id = b.pbl_id and a.c_proj_id = b.proj_id
order by a.c_name;]]>
	</queryString>
	<field name="count_words" class="java.lang.String"/>
	<field name="phase" class="java.lang.String"/>
	<field name="block" class="java.lang.String"/>
	<field name="lot" class="java.lang.String"/>
	<field name="row" class="java.lang.Long"/>
	<field name="project_alias" class="java.lang.String"/>
	<field name="c_name" class="java.lang.String"/>
	<field name="endorsement_date" class="java.sql.Date"/>
	<field name="created_by" class="java.lang.String"/>
	<field name="original_tct" class="java.lang.String"/>
	<field name="project" class="java.lang.String"/>
	<field name="date" class="java.sql.Date"/>
	<field name="c_tct_pages" class="java.lang.Integer"/>
	<field name="year" class="java.lang.String"/>
	<field name="c_company_name" class="java.lang.String"/>
	<field name="c_company_address" class="java.lang.String"/>
	<variable name="CURRENT_PAGE_NUMBER" class="java.lang.Integer" resetType="Page">
		<variableExpression><![CDATA[$V{PAGE_NUMBER}]]></variableExpression>
		<initialValueExpression><![CDATA[]]></initialValueExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="141">
			<printWhenExpression><![CDATA[$V{PAGE_NUMBER}==1]]></printWhenExpression>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="0" width="576" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["DEVELOPER'S UNDERTAKING"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="">
				<reportElement positionType="Float" x="0" y="50" width="576" height="15"/>
				<textElement verticalAlignment="Top" markup="styled">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["I, <b>JOHNNY L. CORPUZ</b>, Filipino of legal age, married with postal and business address at 4th Floor Aster Business Center,Mandala Park, 312 Shaw Boulevard, Pleasant Hills, Mandaluyong City"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="">
				<reportElement positionType="Float" x="0" y="80" width="576" height="15"/>
				<textElement verticalAlignment="Top" markup="styled">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["That I am the Vice-President of "+$P{co_name}+" with office address at "+$P{company_address}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="">
				<reportElement positionType="Float" x="0" y="110" width="576" height="15"/>
				<textElement verticalAlignment="Top" markup="styled">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["The "+$P{co_name}+" undertakes to submit the Tax Declaration of Land and Bldg. (under buyer's name) within 30 days from the issuance of this undertaking of the following accounts: "]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["NO"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="30" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["PRJ"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="60" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["PHS"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="90" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["BLK"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="120" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["LOT"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="150" y="0" width="282" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["BUYER'S NAME"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="432" y="0" width="144" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["TCT NO."]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.Long"><![CDATA[$F{row}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="150" y="0" width="282" height="20"/>
				<box leftPadding="5">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{c_name}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="30" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{project_alias}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="90" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{block}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="60" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{phase}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="120" y="0" width="30" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{lot}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="432" y="0" width="144" height="20"/>
				<box leftPadding="0">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{original_tct}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="316">
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="374" y="121" width="202" height="15"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Affiant"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MMMMM dd, yyyy">
				<reportElement positionType="Float" x="0" y="16" width="576" height="15"/>
				<textElement verticalAlignment="Middle" markup="html">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["In WITNESS WHEREOF, have hereunto affixed my signature this day of ____________ in ____________."]]></textFieldExpression>
			</textField>
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="374" y="106" width="202" height="15"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Johnny L. Corpuz"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MMMMM dd, yyyy">
				<reportElement positionType="Float" x="0" y="166" width="576" height="15"/>
				<textElement verticalAlignment="Middle" markup="html">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["SUBSCRIBED AND SWORN to me before this day of ____________________, affiant exhibiting to me his Tax Identification No. <u>161582628</u>."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MMMMM dd, yyyy">
				<reportElement positionType="Float" x="0" y="211" width="576" height="15"/>
				<textElement verticalAlignment="Middle" markup="html">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Doc No. _______"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MMMMM dd, yyyy">
				<reportElement positionType="Float" x="0" y="241" width="576" height="15"/>
				<textElement verticalAlignment="Middle" markup="html">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page No. ______"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MMMMM dd, yyyy">
				<reportElement positionType="Float" x="0" y="271" width="576" height="15"/>
				<textElement verticalAlignment="Middle" markup="html">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Book No. ______"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MMMMM dd, yyyy">
				<reportElement positionType="Float" x="0" y="301" width="576" height="15"/>
				<textElement verticalAlignment="Middle" markup="html">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Series of "+$F{year}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
