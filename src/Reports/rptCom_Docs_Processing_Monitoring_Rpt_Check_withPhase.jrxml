<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptCom_Docs_Processing_Monitoring_Rpt_Check_withPhase" pageWidth="612" pageHeight="792" columnWidth="540" leftMargin="36" rightMargin="36" topMargin="36" bottomMargin="36" uuid="18cc60a6-5a3a-426b-85b6-8f60497e0da8">
	<property name="ireport.zoom" value="1.6105100000000008"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="48"/>
	<parameter name="company" class="java.lang.String" isForPrompting="false"/>
	<parameter name="prepared_by" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["AAGONZALES"]]></defaultValueExpression>
	</parameter>
	<parameter name="co_id" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="doc_id" class="java.lang.String"/>
	<parameter name="proc_id" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="table" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="process" class="java.lang.String"/>
	<parameter name="status_id" class="java.lang.String"/>
	<parameter name="row_count" class="java.lang.String"/>
	<parameter name="cur_date" class="java.lang.String"/>
	<parameter name="date_from" class="java.util.Date"/>
	<parameter name="date_to" class="java.util.Date"/>
	<parameter name="date_name" class="java.lang.String"/>
	<parameter name="logo1" class="java.io.InputStream" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select a.cv_no, b.date_due, get_client_name(a.entity_id1) as payee, b.check_no, c.amount, f.phase, get_project_name(f.proj_id) as proj
from rf_cv_header a

left join rf_check b on a.cv_no = b.cv_no
left join (
	select distinct on (cv_no, co_id) a.cv_no, a.co_id, sum(tran_amt) as amount from (
	select cv_no, co_id, tran_amt  from rf_cv_detail where bal_side = 'D' and status_id = 'A' and co_id = $P{co_id}) a
	group by cv_no, co_id  ) c on trim(a.cv_no) = trim(c.cv_no) and a.co_id = c.co_id
left join rf_pv_header d on a.cv_no = d.cv_no
left join rf_pv_detail e on d.pv_no in (e.pv_no) and e.status_id = 'A'
left join mf_sub_project f on e.sub_projectid = f.sub_proj_id

where a.status_id = $P{status_id}
and a.remarks LIKE ANY (VALUES ('Commission%'), ('Promo/Incentive%'))
and a.co_id = $P{co_id}
and a.proc_id = $P{proc_id}
and a.pay_type_id = 'B'
and b.co_id = $P{co_id}
and a.date_paid between $P{date_from} and $P{date_to}
group by a.cv_no, b.date_due, a.entity_id1, b.check_no, c.amount, f.phase, f.proj_id
order by f.phase, get_client_name(a.entity_id1) ASC]]>
	</queryString>
	<field name="cv_no" class="java.lang.String"/>
	<field name="date_due" class="java.sql.Timestamp"/>
	<field name="payee" class="java.lang.String"/>
	<field name="check_no" class="java.lang.String"/>
	<field name="amount" class="java.math.BigDecimal"/>
	<field name="phase" class="java.lang.String"/>
	<field name="proj" class="java.lang.String"/>
	<variable name="CURRENT_PAGE_NUMBER" class="java.lang.Integer" resetType="Page">
		<variableExpression><![CDATA[$V{PAGE_NUMBER}]]></variableExpression>
		<initialValueExpression><![CDATA[]]></initialValueExpression>
	</variable>
	<variable name="tot_amount" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{amount}]]></variableExpression>
		<initialValueExpression><![CDATA[]]></initialValueExpression>
	</variable>
	<variable name="total_check" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{check_no}]]></variableExpression>
		<initialValueExpression><![CDATA[]]></initialValueExpression>
	</variable>
	<variable name="Total" class="java.math.BigDecimal" resetType="Group" resetGroup="grpPhase" calculation="Sum">
		<variableExpression><![CDATA[$F{amount}]]></variableExpression>
		<initialValueExpression><![CDATA[$F{amount}]]></initialValueExpression>
	</variable>
	<variable name="Total_1" class="java.math.BigDecimal" resetType="Group" resetGroup="grpSubTotalProject" calculation="Sum">
		<variableExpression><![CDATA[$F{amount}]]></variableExpression>
		<initialValueExpression><![CDATA[$F{amount}]]></initialValueExpression>
	</variable>
	<group name="grpSubTotalProject">
		<groupExpression><![CDATA[$F{proj}]]></groupExpression>
		<groupFooter>
			<band height="15">
				<line>
					<reportElement x="1" y="0" width="540" height="1" uuid="06e6170e-5736-4bd3-b09d-62e4a317958e"/>
				</line>
				<textField pattern="#,##0.00" isBlankWhenNull="true">
					<reportElement x="462" y="1" width="78" height="13" uuid="4dbee3c9-3de1-4d44-813e-39b471eaec1f"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="Tahoma" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{Total_1}]]></textFieldExpression>
				</textField>
				<textField pattern="" isBlankWhenNull="true">
					<reportElement x="371" y="1" width="91" height="13" uuid="7bed898f-cb49-49e6-afad-30c69801ed00"/>
					<box rightPadding="0"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="Tahoma" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Project SubTOTAL :"]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="grpPhase">
		<groupExpression><![CDATA[$F{phase}]]></groupExpression>
		<groupHeader>
			<band height="26">
				<textField pattern="" isBlankWhenNull="true">
					<reportElement isPrintRepeatedValues="false" x="1" y="0" width="283" height="13" uuid="dadadcf3-b5d8-40e2-a26d-b5a75d3945d2"/>
					<box rightPadding="0"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Tahoma" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{proj} != null ? $F{proj} : "None"]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="1" y="25" width="540" height="1" uuid="3394af02-8434-45c5-95ea-93d997065bfc"/>
				</line>
				<textField pattern="" isBlankWhenNull="true">
					<reportElement x="132" y="13" width="100" height="13" uuid="5341b360-5f84-4b3a-9c6c-f717bc1160df"/>
					<box rightPadding="0"/>
					<textElement textAlignment="Left" verticalAlignment="Middle" markup="styled">
						<font fontName="Tahoma" size="8"/>
					</textElement>
					<textFieldExpression><![CDATA["Phase: " + ($F{phase} == "null" || $F{phase} == "" ? "<b>None</b>" : "<b>" + $F{phase} + "</b>")]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="grpSubTotal">
		<groupExpression><![CDATA[$F{phase}]]></groupExpression>
		<groupFooter>
			<band height="15">
				<line>
					<reportElement x="1" y="0" width="540" height="1" uuid="dd095a1d-d8c6-4794-972d-b66cd045e329"/>
				</line>
				<textField pattern="" isBlankWhenNull="true">
					<reportElement x="382" y="1" width="80" height="13" uuid="6c25640d-e8de-41da-9093-0443f97a6d1c"/>
					<box rightPadding="0"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="Tahoma" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Phase SubTOTAL :"]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00" isBlankWhenNull="true">
					<reportElement x="462" y="1" width="78" height="13" uuid="011f9108-26a5-45bc-bf03-43f5fce4422b"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="Tahoma" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{Total}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="78">
			<textField isBlankWhenNull="true">
				<reportElement x="60" y="9" width="298" height="15" uuid="fa1efa6f-92b5-41d1-b30d-b8a60bc12b9a"/>
				<textElement>
					<font fontName="Tahoma" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{company}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="60" y="24" width="322" height="10" uuid="98528a71-7377-4298-86bc-74d9442a4f52"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Top">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[DOCUMENT PROSESSING MONITORING REPORT]]></text>
			</staticText>
			<image hAlign="Center" vAlign="Middle" isUsingCache="true">
				<reportElement x="10" y="6" width="40" height="35" uuid="10999154-26da-4b0e-8d2e-791cc4a66d47"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<imageExpression><![CDATA[$P{logo1}]]></imageExpression>
			</image>
			<textField pattern="dd-MMM-yy">
				<reportElement x="60" y="34" width="252" height="11" uuid="f0618d4c-1174-4224-8e6c-a8113b5ced8c"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="7" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{doc_id}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MMM-yy">
				<reportElement x="97" y="45" width="252" height="11" uuid="66a7f0c1-d40f-4a2c-8644-25fcd9ae6cc5"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="7" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{process}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="90" y="45" width="5" height="11" uuid="73aa5661-52e3-4692-b462-4810ce6b2097"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[:]]></text>
			</staticText>
			<staticText>
				<reportElement x="60" y="45" width="30" height="11" uuid="687ce91d-bb65-411b-acc3-95d6430f246b"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Status]]></text>
			</staticText>
			<textField pattern="dd-MMM-yy">
				<reportElement x="60" y="56" width="252" height="11" uuid="2ecd479c-05eb-46fb-bf74-430396061057"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="7" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["As of " + new SimpleDateFormat("MM/dd/yyyy").format($P{date_to})]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="23" splitType="Stretch">
			<staticText>
				<reportElement x="1" y="1" width="539" height="22" uuid="c9930e23-d5b7-4974-a4cf-6cbd2bf1b868"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.75"/>
					<leftPen lineWidth="0.75"/>
					<bottomPen lineWidth="0.75"/>
					<rightPen lineWidth="0.75"/>
				</box>
				<textElement verticalAlignment="Top">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="67" y="2" width="65" height="21" uuid="fa24c74a-a00f-46ef-b441-a05f5d19362c"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Check Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="382" y="2" width="80" height="20" uuid="950cf06d-ccbc-4e2c-b145-88d903cbc480"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Check No.]]></text>
			</staticText>
			<staticText>
				<reportElement x="462" y="1" width="79" height="21" uuid="9bdfee2e-ce52-4190-b635-9ff2d10cb8c4"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Amount]]></text>
			</staticText>
			<staticText>
				<reportElement x="132" y="2" width="250" height="21" uuid="69f95a7f-dc77-4ce0-ac68-9c1305098aca"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Payee]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="2" width="66" height="21" uuid="4257f626-e5f0-4f38-af13-bf6fdea66dba"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Document No.]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="13" splitType="Stretch">
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="1" y="0" width="66" height="13" uuid="7aed5af3-3b54-4dac-85ca-12d43485af47"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cv_no}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="462" y="0" width="78" height="13" uuid="08ca87d8-e1ee-4639-afc6-b365cf4e19bf"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{amount}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="67" y="0" width="65" height="13" uuid="54ce2356-264e-423c-abb8-5eb883dca382"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[new SimpleDateFormat("MM/dd/yyyy").format($F{date_due})]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="382" y="0" width="80" height="13" uuid="3a785837-ac86-441b-9f54-6d95c32dcaee"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{check_no}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="132" y="0" width="250" height="13" uuid="f6fc5cb9-33b7-4c72-ba6c-ca9d7d5c9ff4"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{payee}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="21">
			<textField isStretchWithOverflow="true" evaluationTime="Auto">
				<reportElement positionType="Float" x="474" y="10" width="67" height="11" uuid="429cff61-e5b2-433f-b452-e9fc65fe4a01"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Page " + ($V{CURRENT_PAGE_NUMBER} == null ? $V{PAGE_NUMBER}:$V{CURRENT_PAGE_NUMBER}) + " of " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEE, d MMM yyyy HH:mm:ss Z">
				<reportElement x="0" y="8" width="145" height="11" uuid="b4f75ca1-7d16-4ce5-b93c-9d23162159e1"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["/" + $P{prepared_by}.toUpperCase()]]></textFieldExpression>
			</textField>
		</band>
	</columnFooter>
	<summary>
		<band height="20">
			<textField isBlankWhenNull="true">
				<reportElement x="209" y="0" width="134" height="13" uuid="2d42aaad-4305-4952-b199-c4f7c9f1167e"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Top" markup="none">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="462" y="0" width="78" height="13" uuid="785f577e-3efc-49cd-95d2-1d91e76f1379"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Top" markup="none">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{tot_amount}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1" y="0" width="208" height="13" uuid="9dd89216-edbd-4271-b13f-a596dba13365"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" TOTAL Check : " + $V{total_check}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;(-#,##0.00)" isBlankWhenNull="true">
				<reportElement x="343" y="0" width="64" height="13" uuid="94f4942d-7210-4af6-90a8-7ec8774c4a9f"/>
				<box rightPadding="5">
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="407" y="0" width="55" height="13" uuid="3cc88bc0-91ad-4cfe-a28f-7997c9d167fa"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Top" markup="none">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["TOTAL :"]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
