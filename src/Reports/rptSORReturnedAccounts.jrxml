<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptSORReturnedAccounts" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="2.5937424601000023"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="265"/>
	<parameter name="proj_id" class="java.lang.String" isForPrompting="false"/>
	<queryString>
		<![CDATA[SELECT
get_project_alias(a.proj_id) as alias, TRIM(b.phase) as phase, trim(b.block) as block, TRIM(b.lot) as lot,
get_client_name(a.entity_id) as client_name, a.sold_amount::NUMERIC as sold_amt, a.ma_date as ma_date, a.remarks as remarks, a.adc_batch_no as batch_no, a.return_date as return_date
FROM rf_bank_header a
LEFT JOIN mf_unit_info b on b.proj_id = a.proj_id and b.pbl_id = a.pbl_id
WHERE return_Date IS NOT NULL
AND a.proj_id = $P{proj_id}
ORDER BY get_project_alias(a.proj_id), b.phase, b.block, b.lot, a.rec_id desc;]]>
	</queryString>
	<field name="alias" class="java.lang.String"/>
	<field name="phase" class="java.lang.String"/>
	<field name="block" class="java.lang.String"/>
	<field name="lot" class="java.lang.String"/>
	<field name="client_name" class="java.lang.String"/>
	<field name="sold_amt" class="java.math.BigDecimal"/>
	<field name="ma_date" class="java.sql.Timestamp"/>
	<field name="remarks" class="java.lang.String"/>
	<field name="batch_no" class="java.lang.String"/>
	<field name="return_date" class="java.sql.Timestamp"/>
	<variable name="total_units" class="java.math.BigDecimal" calculation="Count">
		<variableExpression><![CDATA[$F{client_name}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement x="3" y="38" width="208" height="20"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Tahoma" isBold="true"/>
				</textElement>
				<text><![CDATA[List of Returned SOR Qualified Accounts]]></text>
			</staticText>
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="3" y="56" width="151" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="30" splitType="Stretch">
			<line>
				<reportElement x="1" y="4" width="572" height="1"/>
			</line>
			<line>
				<reportElement x="1" y="27" width="572" height="1"/>
			</line>
			<staticText>
				<reportElement x="3" y="6" width="18" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Ph]]></text>
			</staticText>
			<staticText>
				<reportElement x="21" y="6" width="18" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Blk]]></text>
			</staticText>
			<staticText>
				<reportElement x="39" y="6" width="18" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Lt]]></text>
			</staticText>
			<staticText>
				<reportElement x="57" y="6" width="172" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[CLient Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="229" y="6" width="71" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Sold Amount]]></text>
			</staticText>
			<staticText>
				<reportElement x="300" y="6" width="56" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[MA Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="356" y="6" width="71" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Remarks]]></text>
			</staticText>
			<staticText>
				<reportElement x="427" y="6" width="71" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Batch No]]></text>
			</staticText>
			<staticText>
				<reportElement x="498" y="6" width="71" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Return Date]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="23" splitType="Stretch">
			<textField>
				<reportElement x="3" y="2" width="18" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{phase}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="21" y="2" width="18" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{block}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="39" y="2" width="18" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{lot}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="57" y="2" width="172" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{client_name}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="229" y="2" width="71" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{sold_amt}]]></textFieldExpression>
			</textField>
			<textField pattern="MM/dd/yyyy">
				<reportElement x="300" y="2" width="56" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{ma_date}]]></textFieldExpression>
			</textField>
			<textField pattern="MM/dd/yyyy">
				<reportElement x="498" y="2" width="71" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{return_date}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="356" y="2" width="71" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{remarks}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="427" y="2" width="71" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{batch_no}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="22" splitType="Stretch">
			<textField>
				<reportElement x="450" y="1" width="80" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="530" y="1" width="40" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<lastPageFooter>
		<band height="23">
			<staticText>
				<reportElement x="57" y="1" width="34" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" isBold="true"/>
				</textElement>
				<text><![CDATA[Total:]]></text>
			</staticText>
			<staticText>
				<reportElement x="154" y="1" width="41" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" isBold="true"/>
				</textElement>
				<text><![CDATA[Unit(s)]]></text>
			</staticText>
			<textField>
				<reportElement x="137" y="1" width="17" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{total_units}]]></textFieldExpression>
			</textField>
		</band>
	</lastPageFooter>
</jasperReport>
