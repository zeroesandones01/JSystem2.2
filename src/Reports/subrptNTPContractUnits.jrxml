<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="subrptNoticeOfAward" columnCount="2" printOrder="Horizontal" pageWidth="400" pageHeight="792" columnWidth="200" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ntp_no" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["000087"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select a.seq_no, trim(b.phase) as phase, trim(b.block) as block,
trim(b.lot) as lot, c.model_alias,
(CASE WHEN b.proj_id = '018' THEN 'GREEN' ELSE d.hse_color END) as color_scheme
from co_ntp_detail a
left join mf_unit_info b on b.pbl_id = a.pbl_id and coalesce(b.server_id,'') = coalesce(a.server_id, '')
left join mf_product_model c on c.model_id = b.model_id and coalesce(c.server_id,'') = coalesce(b.server_id, '')
left join
(
	select max(date_created::date), x.proj_id, x.hse_color, x.phase, x.block, x.lot
	from rf_marketing_scheme_pricelist x
	where x.status_id = 'A'
	group by x.proj_id, x.hse_color, x.phase, x.block, x.lot
) d on b.proj_id = d.proj_id
and b.phase = d.phase and b.block = d.block and b.lot = d.lot
where a.ntp_no = $P{ntp_no}
order by a.seq_no::int;]]>
	</queryString>
	<field name="seq_no" class="java.lang.String"/>
	<field name="phase" class="java.lang.String"/>
	<field name="block" class="java.lang.String"/>
	<field name="lot" class="java.lang.String"/>
	<field name="model_alias" class="java.lang.String"/>
	<field name="color_scheme" class="java.lang.String"/>
	<columnHeader>
		<band height="10">
			<staticText>
				<reportElement x="0" y="0" width="25" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="7" isBold="true" isStrikeThrough="false"/>
				</textElement>
				<text><![CDATA[Phase]]></text>
			</staticText>
			<staticText>
				<reportElement x="25" y="0" width="25" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Block]]></text>
			</staticText>
			<staticText>
				<reportElement x="50" y="0" width="15" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Lot]]></text>
			</staticText>
			<staticText>
				<reportElement x="65" y="0" width="54" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[House Model]]></text>
			</staticText>
			<staticText>
				<reportElement x="119" y="0" width="54" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Color Scheme]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="10" splitType="Stretch">
			<textField isStretchWithOverflow="true">
				<reportElement x="119" y="0" width="54" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{color_scheme}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="0" y="0" width="25" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="7" isStrikeThrough="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{phase}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="25" y="0" width="25" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{block}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="50" y="0" width="15" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{lot}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="65" y="0" width="54" height="10"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{model_alias}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
