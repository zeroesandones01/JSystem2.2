<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptNoticeOfCancellation_Backout_Per_Account" pageWidth="612" pageHeight="936" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.1000000000000005"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="496"/>
	<parameter name="notice_type_id" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["04"]]></defaultValueExpression>
	</parameter>
	<parameter name="batch_no" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["0000000022"]]></defaultValueExpression>
	</parameter>
	<parameter name="company" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["CENQHOMES DEVELOPMENT CORPORATION"]]></defaultValueExpression>
	</parameter>
	<parameter name="company_address" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["4th Flr. Anita Bldg., 1300 Quezon Avenue corner Timog Avenue, Quezon City"]]></defaultValueExpression>
	</parameter>
	<parameter name="prepared_by" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["ccpaquibot"]]></defaultValueExpression>
	</parameter>
	<parameter name="entity_id" class="java.lang.String" isForPrompting="false"/>
	<parameter name="proj_id" class="java.lang.String" isForPrompting="false"/>
	<parameter name="pbl_id" class="java.lang.String" isForPrompting="false"/>
	<parameter name="seq_no" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT
  --get_client_name(a.entity_id) as client_name,
  client_name as client_name,
  (CASE WHEN get_clients_has_moved_in(a.entity_id,a.projcode,a.pbl_id,a.seq_no,current_date ) THEN 'NOTICE OF CANCELLATION AND TO VACATE' ELSE 'NOTICE OF CANCELLATION' END) AS notice_title,
  TRIM(c.proj_name) as project_name,
  TRIM(d.description) as unit,
  TRIM(a.entity_id) as client_id,
  TRIM(d.unit_id) as unit_id,

UPPER(TRIM(g.addr_no)) as addr_no,
UPPER(TRIM(g.street)) as street,
UPPER(TRIM(g.barangay)) as barangay,
UPPER(TRIM(h.city_name)) as city_name,
UPPER(TRIM(i.municipality_name)) as municipality_name,
UPPER(TRIM(j.province_name)) as province_name,
    sp_center_format(0, to_char(a.dateprep, 'FMMonth dd, yyyy'))  AS date_prepared,
  sp_center_format(0, TRIM(e.part_desc)) as particular, --50
  sp_center_format(0, TRIM(f.model_desc)) as model, --50
  sp_center_format(0, to_char(a.billingduedate, 'FMMONTH')) as month_due, --30
  sp_center_format(0, to_char(a.billingduedate, 'FMMonth dd, yyyy')) as due_date, --50
  duedate AS due_date_fromto,
  sp_center_format(00, amtdue) as amount_due2, --50
  sp_center_format(0, '533-8459 or 534-2237 local 75') as contact_no, --50
  sp_center_format(0, 'collection@acerhomes.com') as email,
  k.company_alias, --60
  company_address, m.notice_desc


FROM rf_client_notices a
LEFT JOIN rf_entity b ON b.entity_id = a.entity_id
LEFT JOIN mf_project c ON c.proj_id = a.projcode
LEFT JOIN mf_unit_info d ON d.proj_id = a.projcode AND d.pbl_id = a.pbl_id
LEFT JOIN mf_client_ledger_part e ON e.part_id = a.part_id
LEFT JOIN mf_product_model f ON f.model_id = d.model_id
LEFT JOIN rf_entity_address g ON g.entity_id = a.entity_id AND g.pref_billing
LEFT JOIN mf_city h ON h.city_id = g.city_id
LEFT JOIN mf_municipality i ON i.municipality_id = g.municipality_id
LEFT JOIN mf_province j ON j.province_id = g.province_id
LEFT JOIN mf_company k ON k.co_id = c.co_id
LEFT JOIN view_client_co_applicant_name l ON  l.entity_id = a.entity_id
LEFT JOIN mf_notice_type m on m.notice_id = a.notice_id

WHERE a.entity_id = $P{entity_id}
AND a.projcode = $P{proj_id}
AND a.pbl_id = $P{pbl_id}
AND a.seq_no = $P{seq_no}
AND dateprep >= current_date
ORDER BY get_client_name(a.entity_id);]]>
	</queryString>
	<field name="client_name" class="java.lang.String"/>
	<field name="notice_title" class="java.lang.String"/>
	<field name="project_name" class="java.lang.String"/>
	<field name="unit" class="java.lang.String"/>
	<field name="client_id" class="java.lang.String"/>
	<field name="unit_id" class="java.lang.String"/>
	<field name="addr_no" class="java.lang.String"/>
	<field name="street" class="java.lang.String"/>
	<field name="barangay" class="java.lang.String"/>
	<field name="city_name" class="java.lang.String"/>
	<field name="municipality_name" class="java.lang.String"/>
	<field name="province_name" class="java.lang.String"/>
	<field name="date_prepared" class="java.lang.String"/>
	<field name="particular" class="java.lang.String"/>
	<field name="model" class="java.lang.String"/>
	<field name="month_due" class="java.lang.String"/>
	<field name="due_date" class="java.lang.String"/>
	<field name="due_date_fromto" class="java.lang.String"/>
	<field name="amount_due2" class="java.lang.String"/>
	<field name="contact_no" class="java.lang.String"/>
	<field name="email" class="java.lang.String"/>
	<field name="company_alias" class="java.lang.String"/>
	<field name="company_address" class="java.lang.String"/>
	<field name="notice_desc" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="100">
			<textField>
				<reportElement x="0" y="0" width="572" height="25"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="16" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{company}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="25" width="572" height="15"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{company_address}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="55" width="572" height="35"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="22" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{notice_title}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="142" splitType="Prevent">
			<textField>
				<reportElement x="429" y="10" width="133" height="15"/>
				<box rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{project_name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="429" y="26" width="133" height="15"/>
				<box rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{unit_id}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="429" y="42" width="133" height="15"/>
				<box rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{client_id}]]></textFieldExpression>
			</textField>
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="10" y="10" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="10" y="54" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{client_name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="11" y="123" width="330" height="15"/>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Dear " + $F{client_name} + ":"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="361" y="10" width="62" height="15"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isItalic="true"/>
				</textElement>
				<text><![CDATA[Project]]></text>
			</staticText>
			<staticText>
				<reportElement x="361" y="26" width="62" height="15"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isItalic="true"/>
				</textElement>
				<text><![CDATA[Unit]]></text>
			</staticText>
			<staticText>
				<reportElement x="361" y="42" width="62" height="15"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isItalic="true"/>
				</textElement>
				<text><![CDATA[Client ID]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="10" y="84" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{barangay}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="10" y="99" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{city_name} == null ? msg("{0}, {1}", $F{municipality_name} == null ? "" : $F{municipality_name}, $F{province_name} == null ? "" : $F{province_name}):$F{city_name}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="10" y="69" width="246" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg("{0} {1}", $F{addr_no} == null ? "" : $F{addr_no} , $F{street} == null ? "" : $F{street}  )]]></textFieldExpression>
			</textField>
		</band>
		<band height="784">
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="10" y="10" width="552" height="20"/>
				<textElement textAlignment="Justified" markup="styled">
					<font fontName="Tahoma"/>
					<paragraph tabStopWidth="40"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Please be informed that have cancelled your account on<u><b>          "+$F{date_prepared}+"          </b></u> due to your voluntary withdrawal base on your submitted back-out letter."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="10" y="57" width="552" height="20"/>
				<textElement textAlignment="Justified" markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["If you have already move-in, this should also serve as a notice for you to vacate the property within thirty (30) days from your cancellation date.\n\n\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="10" y="77" width="552" height="20"/>
				<textElement markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Very truly yours,\n\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="10" y="100" width="552" height="20"/>
				<textElement markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Johnny L. Corpuz \nVice President\n\n"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="11" y="326" width="551" height="20"/>
				<textElement textAlignment="Left" verticalAlignment="Top" markup="styled">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Known to me and to me known to be the same person who presented and executed the foregoing "+$F{notice_desc}+" "+
"consisting of one (1) page on behalf of the corporation which he/she is authorized to sign "+
"and represent, in which acknowledgement is written, he/she acknowledged to me that the same is his/her "+
"own free and voluntary act and deed.\n\n\n"+
"         <b>IN WITNESS WHEREOF</b>, I have hereunto set my hand and affixed my notarial seal on the date "+
"at the place first above written.\n\n"+
"<b>Doc. No. _________________;</b>\n"+
"<b>Page No. _________________;</b>\n"+
"<b>Book No. _________________;</b>\n"+
"<b>Series of 2020.</b>"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="11" y="225" width="551" height="20"/>
				<textElement textAlignment="Left" verticalAlignment="Top" markup="styled">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["         <b>BEFORE ME</b>, a Notary Public, for and in the above jurisdiction, this __________________ personally appeared, with their competent evidence of identity, to wit:"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="54" y="258" width="157" height="30"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["<b>Name</b>"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="368" y="288" width="157" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle" markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["08/02/2022"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="54" y="288" width="157" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle" markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Alan Alfonso A. Matias"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="211" y="288" width="157" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Drivers License No. D16-05-009678"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="368" y="258" width="157" height="30"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["<b>Expiry Date</b>"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="211" y="258" width="157" height="30"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="styled">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["<b>Goverment-Issued Identification</b>"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="11" y="184" width="551" height="20"/>
				<textElement textAlignment="Left" verticalAlignment="Middle" markup="styled">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["REPUBLIC OF THE PHILIPPINES)\n"+
"                                                       )S.S."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="11" y="141" width="551" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="styled">
					<font fontName="Tahoma" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["ACKNOWLEDGEMENT"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="12">
			<textField>
				<reportElement x="0" y="0" width="256" height="12"/>
				<textElement markup="styled">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg("<font face=\"Dot Font\">{0}</font>/{1}", $F{company_alias}, $P{prepared_by}.toUpperCase())]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="320" y="0" width="252" height="12"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Batch No. " + $P{batch_no}]]></textFieldExpression>
			</textField>
		</band>
	</columnFooter>
</jasperReport>
